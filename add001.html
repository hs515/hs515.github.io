<!DOCTYPE html>
<html>

<head>
    <title>
        Add 001!
    </title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
        integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="js/mathbox.js"></script>
    <script>
        let number = 10;
        let numberOfCorrect = 0;
        let questions = new Array();

        function createNext() {
            const n1 = randomNumberLessThan(10);
            const n2 = randomNumberLessThan(10);
            questions[questions.length] = {
                first: n1,
                second: n2,
                answer: undefined
            };
            document.querySelector('#number1').innerHTML = n1;
            document.querySelector('#number2').innerHTML = n2;
        }

        function saveAnswer() {
            if (document.querySelector('#answer').value.length > 0) {
                const cur = questions[questions.length - 1];
                cur.answer = parseInt(document.querySelector('#answer').value);
                const li = document.createElement('p');
                let result = (cur.first * cur.second === cur.answer);
                numberOfCorrect += result;
                let mark = result ? "<span class=\"badge badge-success\">T</span>" : "<span class=\"badge badge-danger\">F</span>";
                let danger = result ? "<div class=\"alert alert-success\" role=\"alert\">" : "<div class=\"alert alert-danger\" role=\"alert\">";

                li.innerHTML = `${danger} ${mark} ${cur.first} x ${cur.second} = ${cur.answer} </div>`;
                document.querySelector('#answers').prepend(li);

                document.querySelector('#answer').value = "";
                createNext();

                document.querySelector('#topline').innerHTML = `Answers ${numberOfCorrect}/${questions.length - 1}`
                document.getElementById("message").hidden = true;
            } else {
                document.getElementById("message").innerHTML = "Please input your answer then submit.";
                document.getElementById("message").hidden = false;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelector('#submit').disabled = true;
            document.getElementById("message").hidden = true;

            document.querySelector('#answer').onkeyup = () => {
                if (document.querySelector('#answer').value.length > 0) {
                    document.querySelector('#submit').disabled = false;
                } else {
                    document.querySelector('#submit').disabled = true;
                }
            }

            document.querySelector('form').onsubmit = () => {
                const answer = document.querySelector('#answer').value;
                console.log(answer);
                saveAnswer();

                // Stop submitting form
                return false;
            }

            createNext();
        })
    </script>
</head>

<body>
    <div class="alert alert-info" role="alert">
        <h1 id="topline">Answers</h1>
        <form>
            <label id="number1" for="number1"></label>
            x
            <label id="number2" for="number2"></label>
            =
            <input type="number" id="answer" placeholder="Answer">
            <input type="submit" id="submit">
        </form>
    </div>
    <div id="message" class="alert alert-warning" role="alert"></div>
    <div id="answers"></div>
</body>

</html>